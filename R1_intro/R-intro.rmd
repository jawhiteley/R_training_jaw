---
title: "A Gentle Introduction to R"
author: "Jonathan Whiteley"
date: "`r Sys.Date()`"
output: 
  beamer_presentation: 
    theme: Boadilla
    keep_tex: yes
header-includes: |
  \setbeamertemplate{itemize item}[circle]
  \setbeamertemplate{enumerate item}[circle]
  \usepackage{tikz}
  \usetikzlibrary{arrows.meta,calc,tikzmark}
  \newcommand{\Rlogo}{\includegraphics[height=1em]{`r file.path(R.home("doc"), "html", "logo.jpg")`}}
  \newcommand{\R}{\texttt{R}}
  \newcommand{\highlight}[1]{\StringTok{#1}}
  \newcommand{\important}[1]{\AlertTok{#1}}
  \newcommand{\fade}[1]{\textcolor[rgb]{0.66,0.66,0.66}{#1}}
  \newcommand{\annote}[1]{{\footnotesize #1}}
  \newcommand{\name}[1]{\textit{texttt{\VariableTok{#1}}}}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
options(width = 56)  # to fit output on slides: either smaller font or shorter width (or both)
```

```{r NOTES, include=FALSE, eval=FALSE}
https://pandoc.org/MANUAL.html#pandocs-markdown
https://pandoc.org/MANUAL.html#slide-shows
https://pandoc.org/MANUAL.html#custom-styles

Tips for controlling highlighting and styles in markdown:
https://stackoverflow.com/questions/53530985/custom-highlighting-style-in-rmarkdown 

Quarto Pandoc Markdown, with native support for flowcharts and diagrams
and other extensions (like callouts and code annotation):
https://quarto.org/docs/authoring/markdown-basics.html

Can I define global 'styles' with options for different output formats, 
and reduce the amount of custom LaTeX?
  
+ https://tug.org/tug2020/preprints/MacFarlane-Keynote-slides.pdf
+ https://stackoverflow.com/questions/23825317/how-to-convert-markdown-css-pdf
```


# Pop Quiz

\annote{\fade{We will review these \textit{at the end}, so you can see how much you have learned.}}

+ What does 'CRAN' stand for?
+ Why is it named '$\R$'?
+ How can you use $\R$ _interactively_?
+ How do you find out what a function does & how to use it?
+ How do you store values to re-use later?
+ True or False: Warnings can be ignored, but an Error means I made a mistake.
+ True or False: Error messages will tell me how to fix the problem.

<!--
# Introductions - activity

-->

# Learning Objectives

* Get familiar with the ![]( `r file.path(R.home("doc"), "html", "logo.jpg")`){height=1em} _interface_
* Use technical _terms_ for $\R$ concepts
* Enter _commands_
  * input & output: using $\R$ interactively
  * use some common _functions_
* Understand _Errors_ & _Warnings_
* How to get Help


# Why is it named '$\R$'?

1. **$\R$** started as an _open-source_ implementation of the  
   **`S`** statistical computing language (S-PLUS)^[https://www.r-project.org/about.html]
  
   - `S` was created at Bell Laboratories in 1976^[https://en.wikipedia.org/wiki/S_(programming_language)]
   
   - $\R$ was based on the `S` syntax (mostly v3), but works very differently "under the hood".
  
2. **$\R$** was created by [**R**]{.underline}oss Ihaka and [**R**]{.underline}obert Gentleman 
   --- aka "R & R"^[https://www.r-project.org/contributors.html] --- 
   at the University of Aukland in the early 1990s.

\
_Read more about $\R$'s history on [Wikipedia](https://en.wikipedia.org/wiki/R_(programming_language)#History)_^[https://en.wikipedia.org/wiki/R_(programming_language)#History]

# The $\Rlogo$ Interface

- 'base $\R$' has a slightly different interface for each **O**perating **S**ystem (OS)
  - GUI = **G**raphical **U**ser **I**nterface
- $\R$ can also run inside of a terminal (no GUI) or other software (different GUI).

## [**I**ntegrated **D**evelopment **E**nvironment](https://en.wikipedia.org/wiki/Integrated_development_environment) (IDE)

- An IDE is like an extra interface layer on top of 'base $\R$'
- IDEs often add convenient tools to make writing code easier (e.g., syntax highlighting),
  and for developing larger projects with multiple files.
- **[RStudio](https://posit.co/products/open-source/rstudio/)** is one of the most popular cross-platform IDEs for $\R$.
  - RStudio is available in open source (free/libre) and commercial^[for organizations not able to use software licensed with AGPL] editions.
  

# A quick tour of the 'base $\R$ GUI'

![screenshot of R GUI](images/R-screenshot-win-plot.png){width=90%}

# A quick tour of RStudio

<!-- https://www.rstudio.com/about/logos/ -->

![screenshot of RStudio](images/RStudio-screenshot-4pane-default.png){width=90%}

  
# Interacting with $\Rlogo$

- Regardless of the GUI, 
  you interact with $\R$ primarily using a _command line_
  
  - aka a [c]{.underline}ommand [l]{.underline}ine [i]{.underline}nterface (cli)
  - the command line is usually in the *console*

- “Question-and-Answer Model”

  - | You ask $\R$ to do something (a *command*),  
    |      and $\R$ tells you the answer (*result*).
    
- Instructions are given to $\R$ using the *R language*.

::: notes
R is designed so that users can start by using it *interactively* (what we will do today), and then gradually use it for more programming as their needs and skills grow.

  - Not "point-and-click": no menus or wizards to guide you through steps of an analysis or procedure.
:::

  
# The $\Rlogo$ console

The *console* is a window or pane where you will find:

- The _command line_

  - where you will enter commands for $\R$ to run

- Results of commands and other output

- Messages, Warnings, and Errors 


# The $\Rlogo$ command-line

- The command *prompt* normally looks like this:

  ``` default
  >
  ```
  
  \annote{(the colour varies depending on the interface)}
  
  - This is $\R$'s way of saying "I am ready to accept new commands".
  - Type a new command on the line after this prompt (i.e., *input*).
  
- **Press \important{\texttt{return}}/\important{\texttt{enter}} to *run* the current *command* **

- If you can still edit the command next to the prompt, then it has not been submitted to $\R$ to execute (it is still waiting for input).

- If the last prompt is not empty (i.e., there is text beside it)  
  _and_ you cannot edit what is beside the prompt,  
  it means $\R$ is still running the last command and is not ready to accept a new command yet.
  
  - Wait for a new empty prompt to appear before entering the next command.

# The $\Rlogo$ command-line (continued)

- If the prompt looks like this:  

  ``` default
  +
  ```

  it means the last command was _incomplete_ and $\R$ is waiting for more input.  
  $\R$ will not do anything until the command is completed or cancelled.
  
  - This usually means you forgot a closing\
    *quote* \important{\texttt{"}}, *parenthesis* \important{\texttt{(}}, 
    *bracket* \important{\texttt{[}}, or *brace* \important{\texttt{\{}}
    
- \highlight{You can \textit{cancel} the current command at any time by pressing \texttt{escape}} (\important{\texttt{esc}})


# Input & Output

In this presentation, 

+ *commands* that can be entered in the *command-line* look like this:

  ``` default{#format_input}
  Input (commands)
  ```

  - You can try these yourself!

+ Expected output (results) look like this:

  ```{r format_output, include=TRUE, eval=TRUE, echo=FALSE}
  cat("Output (results)")
  ```

# Some early commands

<!-- screenshot of opening message:
$\R$ gives you suggestions of commands when it starts (in the console) 
-->


# $\Rlogo$ is a show-off

+--------------------+----------------------------------------------------------+
| ``` r              |                                                          |
| demo(graphics)     | - some plots and graphs that can be made with $\R$       |
| ```                |                                                          |
+--------------------+----------------------------------------------------------+
| ``` r              |                                                          |
| demo(image)        | - image-like graphics and maps                           |
| ```                |   that can be produced with $\R$                         |
+--------------------+----------------------------------------------------------+
| ``` r              |                                                          |
| demo(lm.glm)       | - a demonstration of linear modelling & GLMs             |
| ```                |                                                          |
+--------------------+----------------------------------------------------------+
| ``` r              |                                                          |
| demo()             | - a list of available demos                              |
| ```                |                                                          |
+--------------------+----------------------------------------------------------+
| ``` r              | |                                                        |
| help.start()       | | **&larr;** A great place to start,                     |
| ```                | |     especially if you are comfortable reading          |
|                    | |     documentation for a programming language.          |
|                    | |     More on this later.                                |
|                    |                                                          |
+--------------------+----------------------------------------------------------+

## Note

\R{} will not only show the output, but also _the code used to produce it_.

<!--
The descriptions in this section could be entered as comments directly in the code block.
But the comment character hasn't been introduced yet,
and I need a clear way to explain the commands in the meantime.
-->

:::::::: {.content-hidden}
# $\Rlogo$ is a show-off (alt)

:::::: {.columns}
::: {.column width="40%"}

```{r showoff, eval=FALSE}
demo(graphics)  
demo(image)     
demo(lm.glm)    
demo()          

help.start()    
```

\
\tikzmarknode{n1}{A} great place to start, 
especially if you are comfortable reading 
documentation for a programming language.  
More on this later.

:::
::: {.column width="60%"}

\begin{itemize}

\item[\tikzmarknode{b1}{$\bullet$}]
  some plots and graphs that can be made with $\R$

\item[\tikzmarknode{b2}{$\bullet$}]
  image-like graphics and maps that can be made with $\R$

\item[\tikzmarknode{b3}{$\bullet$}]
  a demonstration of linear modelling \& GLMs

\item[\tikzmarknode{b4}{$\bullet$}]
  a list of available demos

\end{itemize}

\

## Note

\R{} will not only
show the output, but also\
_the code used to produce it_.

:::
::::::


<!-- Overlay arrows:
https://tex.stackexchange.com/questions/209052/how-to-get-tikzmark-to-work
https://texdoc.org/serve/tikzmark/0
https://tikz.dev/tikz-arrows
https://www.overleaf.com/latex/templates/beamer-arrows/wmqkckggvjsd
https://tex.stackexchange.com/questions/199218/how-to-draw-an-arrow-to-a-specified-position-in-a-frame-and-write-some-notes-on
https://tex.stackexchange.com/questions/347492/how-can-i-draw-arrows-from-items-to-a-picture-in-beamer
https://tex.stackexchange.com/questions/9559/drawing-on-an-image-wit%E2%80%8C%E2%80%8Bh-tikz/
-->

\begin{tikzpicture}[remember picture, overlay]
  \draw [ultra thick, gray, -{Latex}] ( $ (n1.north) +(0,2pt) $ ) -- ++(0,4ex);
  \draw [ultra thick, gray, -{Latex}] (b1.west) -- ++(-14ex,-1.5ex);
  \draw [ultra thick, gray, -{Latex}] (b2.west) -- ++(-17ex,1.5ex);
  \draw [ultra thick, gray, -{Latex}] (b3.west) -- ++(-16ex,4ex);
  \draw [ultra thick, gray, -{Latex}] (b4.west) -- ++(-23ex,7ex);
\end{tikzpicture}

<!--
The descriptions in this section could be entered as comments directly in the code block.
This would be much simpler in terms of the content (Markdown).
But the comment character hasn't been introduced yet,
and I need a clear way to explain the commands in the meantime.
-->
::::::::


# $\Rlogo$ is a calculator

:::::: {.columns}
::: {.column width="50%"}

```{r calculator}
1 + 1
2 * 2
2 ^ 3
```

:::
::: {.column width="50%"}

```{r calculator2}
10 - 1
8 / 2
sqrt(9)
```

:::
::::::

- These are *expressions*
- *Expressions* are *evaluated*, and the *value* (result) is *returned*\
  (sometimes *invisibly*)

::: notes

The bullet points are accurate, but I note that the 
[R Language Definition](https://cran.r-project.org/doc/manuals/r-release/R-lang.html)
distinguishes between 'expressions', which are actually a type of object,
and 'statements' (see s2.1.3 'Language objects', s2.1.4 'Expression objects'):

- An *expression* \[object?\] contains one or more statements.
- A statement is a syntactically correct collection of tokens.
- Expression objects are special language objects which contain parsed but unevaluated R statements. 
- "an expression object can contain several such expressions" (not clear)

Therefore, my understanding is that 
a *statement* is parsed (by the R parser),
which results in an unevaluated *expression* (an object of mode "expression"),
which can in turn be evaluated (by 'the evaluator', such as `eval()`)
to return the *value*.

"All expressions have a value." (s3 'Evaluation of expressions')

:::


# $\Rlogo$ command-line tips

- With the cursor next to the empty prompt (\OtherTok{\texttt{>}}),  
  use the up & down \important{arrow keys} (&uarr;&darr;) to
  re-produce previous commands
- This lets you 
  “scroll through your *command history*”
- Press \important{up} (\important{$\uparrow$}) once, and you get the last command you entered 
  without having to copy & paste


# Symbolic _variables_
<!-- variables vs objects?  Objects vs names?  
In R, everything is an _object_, and each has a name -->

- You can store values (*objects*) in symbolic variables (*names*) 
  using an *assignment operator*
  
-------- ------------------------------------------------------------------
`<-`{.r} assign the *value* on the **right** to the *name* on the **left**
---------------------------------------------------------------------------

:::::: {.columns}
::: {.column width="50%"}

- Names can include:

|||<!-- empty header row, because most Markdown parsers require a header row -->
|:----------|---------|
|letters    |\StringTok{\texttt{a-z A-Z}}|
|numbers    |\StringTok{\texttt{0-9}}    |
|periods    |\StringTok{\texttt{.}}      |
|underscores|\StringTok{\texttt{\_}}     |

- Names _should begin with a **\StringTok{letter}**_

:::
::: {.column width="50%"}
```{r assignment, results='hide'}
A <- 10
B <- 10 * 10
A_log <- log(A)
B.seq <- 1:B

assign('x', 3)
```
:::
::::::


# Retrieve values

When a variable *name* is evaluated, it returns the stored *value*. 

:::::: {.columns}
::: {.column width="50%"}

```{r}
A
A_log
```

:::
::: {.column width="50%"}

```{r}
B
x
```

:::
::::::

```{r}
B.seq
```


# Built-in variables

Some words and letters already have values in $\R$  
and should **never be used as variable names**.

:::::: {.columns}
::: {.column width="50%"}

```{r}
pi
```

:::
::: {.column width="50%"}

```{r, eval=FALSE}
version
```
```{r, echo=FALSE}
cat("... information about \nthis version of R ...")
```

:::
::::::

```{r}
letters
LETTERS
```


# Reserved words

Some words and letters already have special meaning in the R language (*keywords*) 
and should **never be used as variable names**.


# [Quiz](#pop-quiz) Review

<!-- paste in questions from [Pop Quiz][], above. -->

::: notes
`## Answers (for discussion)`

answer in notes
:::

# References & More Information

```{r, eval=FALSE}
help.start()
```

Available from the screen above (offline):

  - [An Introduction to R](https://cran.r-project.org/doc/manuals/r-release/R-intro.html)
  - [The R Language Definition](https://cran.r-project.org/doc/manuals/r-release/R-lang.html)

Online:

+ [RStudio Education](https://education.rstudio.com/) ([education.rstudio.com](https://education.rstudio.com/))
  - tutorials, workshop materials, and other resources.
+ [$\Rlogo$](https://r-project.org/) [Manuals](https://cran.r-project.org/manuals.html)
  (<https://cran.r-project.org/manuals.html>)
+ $\Rlogo$ [Contributed Documentation](https://cran.r-project.org/other-docs.html)
  - e.g., <http://cran.r-project.org/doc/contrib/usingR.pdf>
+ Internet search
  - [Stack Overflow](https://stackoverflow.com/questions/tagged/r) ([stackoverflow.com](https://stackoverflow.com/))
  - [Cookbook for R](http://www.cookbook-r.com/) ([www.cookbook-r.com](http://www.cookbook-r.com/))

<!-- deprecated (these are 10+ years old, but they helped me learn)
Books:

  - [A Beginner's Guide to R](https://link.springer.com/book/10.1007/978-0-387-93837-0)
  - [Introductory Statistics with R](https://link.springer.com/book/10.1007/978-0-387-79054-1)
-->

::: notes

Other training materials and tutorials:

[RStudio Education](https://education.rstudio.com/)
https://rladiessydney.org/courses/ryouwithme/01-basicbasics-0/
https://moderndive.netlify.app/1-getting-started.html
https://cengel.github.io/R-intro/

:::