---
title: "A Gentle Introduction to R"
author: "Jonathan Whiteley"
date: "`r Sys.Date()`"
output: 
  beamer_presentation: 
    theme: Boadilla
    colortheme: default
    highlight: my_tango.theme
    slide_level: 2
    toc: false
    keep_tex: yes
fontsize: 11pt
params:
  is_virtual: TRUE    # is this presentation for a virtual (T) or in-person (F) environment?
header-includes: |
  \setbeamertemplate{itemize item}[circle]
  \setbeamertemplate{enumerate item}[circle]
  %\usepackage{layout}    % add `\layout` to the document to show page layout and parameter values
  \usepackage{tikz}
  \usetikzlibrary{arrows.meta,calc,tikzmark,fit, positioning}
  %\AtBeginEnvironment{verbatim}{\small}% reduce font size in R output
  % https://stackoverflow.com/questions/35734525/reduce-space-between-code-chunks-and-code-output-in-rmarkdown-beamer-presentatio
  \makeatletter
    \def\verbatim{\small\@verbatim \frenchspacing\@vobeyspaces \@xverbatim}
    %\preto{\@verbatim}{\topsep=-4pt \partopsep=0pt}
  \makeatother
  %\setlength{\OuterFrameSep}{4pt}
  \newcommand{\Rlogo}{\includegraphics[height=1em]{`r file.path(R.home("doc"), "html", "logo.jpg")`}}
  \newcommand{\R}{\texttt{R}}
  \newcommand{\ctop}{\vspace{0.2\baselineskip}}  % for aligning text with the top of a code block in a table
  \newcommand{\highlight}[1]{\StringTok{#1}}
  \newcommand{\important}[1]{\AlertTok{#1}}
  \newcommand{\fade}[1]{\textcolor[rgb]{0.66,0.66,0.66}{#1}}
  \newcommand{\annote}[1]{{\footnotesize #1}}
  \newcommand{\name}[1]{\VariableTok{\texttt{#1}}}
---

```{r setup, include=FALSE}
## https://yihui.org/knitr/options/
knitr::opts_chunk$set(echo = TRUE, comment='')
options(width = 60)  # to fit output on slides: either smaller font or shorter width (or both)
```


## Debugging

- `\baselineskip`: \the\baselineskip
- `\parskip`: \the\parskip
- `\topsep`: \the\topsep
- `\partopsep`: \the\partopsep
- `\OuterFrameSep`: \the\OuterFrameSep

\begin{Shaded}
\begin{itemize}
\tightlist
\item topsep: \the\topsep
\item partopsep: \the\partopsep
\item OuterFrameSep: \the\OuterFrameSep
\end{itemize}
\end{Shaded}

```{r debugging, echo=FALSE}
message('pandoc version: ', rmarkdown::pandoc_version())
message('knitr version: ', packageVersion("knitr"))
message('rmarkdown version: ', packageVersion("rmarkdown"))
```



## Prerequisites

- Access to a copy of the [$\Rlogo$](https://www.r-project.org)[^Rlogo] software

  - i.e., a "binary executable"
  
  - Go to _[www.r-project.org](https://www.r-project.org)_ to get a copy,  
    or ask your system administrator.

- Knowledge of common mathematical operations: arithmetic, logarithms, etc.

- No previous experience with R or programming required.


# Welcome

## Pop Quiz

\annote{\fade{We will review these \textit{at the end}, so you can see how much you have learned.}}

+ What does 'CRAN' stand for?
+ Why is it named '$\R$'?
+ How can you use $\R$ _interactively_?
+ How do you find out what a function does & how to use it?
+ How do you store values to re-use later?
+ True or False: Warnings can be ignored, but an Error means I made a mistake.
+ True or False: Error messages will tell me how to fix the problem.

```{r welcome, echo=FALSE, results='asis'}
if (params$is_virtual) {
  cat("\\ 
  \n### Answer in the chat:
  \n
  \nWhat emoji best describes your current mood or state of mind?
  ")
}
```


## Introductions

- Name
- Pronouns
- Job title, role
- _optional_: a hobby or activity you enjoy?

<!-- -->

- Have you used $\R$ before?
- Have you used a programming language before?

::: notes

Other icebreaker questions:

- Favourite candy or treat as a child?
- Favourite music band or genre?
- Favourite book?
- Highlight of the past month / year (personal or professional)?

If available on platform, online polls:

- Where are you joining from?
- Have you used `R` before?
- Have you used a programming language before?

If a chat is available, put answer to a question there:

- What emoji best describes your current mood or state of mind?
- Favourite emoji?

More icebreaker ideas:

- https://blog.slido.com/virtual-icebreakers/
- https://www.mural.co/blog/virtual-meeting-ice-breakers

:::


## <!-- interactive --> Icebreaker activity

:::::: {.columns .onlytextwidth}
::: {.column width="48%"}

**What is this?**  
  1--3 word description, for\ example:
  
  - "This is grey"
  - "This looks uncomfortable"
  
**OR** caption this image?

<!-- empty line for spacing -->\
On your turn:

1. Previous person's name
2. Their answer to the question

3. Your name
4. Your answer

5. Name of the person to go next

:::
::: {.column width="50%"}

![Caption this image<!-- of a pigeon with a leaf on its face -->.\
©\ [John\ Speirs/\linebreak[0]Comedywildlifephoto.com](https://www.comedywildlifephoto.com/gallery/comedy-wildlife-2021-competition-winners.php)](images/john-speirs_i-guess-summers-over.jpg){width=100%}

:::
::::::


## Learning Objectives

* Get familiar with the ![]( `r file.path(R.home("doc"), "html", "logo.jpg")`){height=1em} *interface*
* Use technical _terms_ for $\R$ concepts
* Enter *commands*
  * use $\R$ interactively: understand input & output
  * use some common *functions*
* Get familiar with '$\R$ objects'
  * store & retrieve values
* Understand *Errors*, *Warnings*, and *Messages*
* How to get Help


## Why is it named '$\R$'?

1. **$\R$** started as an _open-source_ implementation of the  
   **`S`** statistical computing language (S-PLUS)^[https://www.r-project.org/about.html]
  
   - `S` was created at Bell Laboratories in 1976^[https://en.wikipedia.org/wiki/S_(programming_language)]
   
   - $\R$ was based on the `S` syntax (mostly v3), but works very differently "under the hood".
  
2. **$\R$** was created by [**R**]{.underline}oss Ihaka and [**R**]{.underline}obert Gentleman 
   --- aka "R & R"^[https://www.r-project.org/contributors.html] --- 
   at the University of Aukland in the early 1990s.

\bigskip
_Read more about the history of $\R$  on [Wikipedia](https://en.wikipedia.org/wiki/R_(programming_language)#History)_^[https://en.wikipedia.org/wiki/R_(programming_language)#History]


# Interacting with $\R$ (Interface)

## The $\Rlogo$ Interface

- 'base $\R$' has a slightly different interface for each **O**perating **S**ystem (OS)
  - GUI = **G**raphical **U**ser **I**nterface
- $\R$ can also run inside of a terminal (no GUI) or other software (different GUI).

### [**I**ntegrated **D**evelopment **E**nvironment](https://en.wikipedia.org/wiki/Integrated_development_environment) (IDE)

- An IDE is like an extra interface layer on top of 'base $\R$'
- IDEs often add convenient tools to make writing code easier (e.g., syntax highlighting),
  and for developing larger projects with multiple files.
- **[RStudio](https://posit.co/products/open-source/rstudio/)** is one of the most popular cross-platform IDEs for $\R$.
  - RStudio is available in open source (free/libre) and commercial^[for organizations not able to use software licensed with AGPL] editions.
  

## A quick tour of the 'base $\R$ GUI'

<!-- ![Screenshot of the R GUI in Windows.](images/R-screenshot-win-plot.png){width=90%} -->
\begin{figure}
\centering
\begin{tikzpicture}[overlay/.style={ultra thick, rounded corners, draw=red, fill=white, fill opacity=0.5, text opacity=1},
                    note/.style={align=center, font=\Large\bfseries}]
  \node[anchor=south west,inner sep=0] (image) at (0,0) {\includegraphics[width=0.9\textwidth]{images/R-screenshot-script-plot-win.png}};
  \begin{scope}[x={(image.south east)},y={(image.north west)}]
    \draw[overlay] (0,0.15) rectangle (0.54,0.87);
    \node[note] at (0.14,0.27) {console};
    \draw[overlay] (0.245,0.065) rectangle (0.585,0.76);
    \node[note] at (0.415,0.41) {source};
    \draw[overlay] (0.588,0.07) rectangle (0.987,0.87);
    \node[note] at (0.788,0.47) {plot\\ window};
  \end{scope}
\end{tikzpicture}
\caption{Screenshot of the R GUI in Windows.}
\end{figure}


## A quick tour of RStudio

<!-- RStudio is pretty strict about the use of its logo: https://www.rstudio.com/about/logos/ -->

:::::: {.columns .onlytextwidth}
::: {.column width="73%"}

The RStudio GUI has 4 'panes' that contain 'tabs'. 

<!-- ![Screenshot of RStudio.](images/RStudio-screenshot-4pane-default.png){width=90%} -->
<!-- LaTex code to add graphical annotations with the Tikz package.
But the slide should still be comprehensible with just the image, above.
I could add a condition that only includes this for pdf output, 
and a simple Markdown image link (as above) for other formats.
-->
\begin{figure}
\centering
\begin{tikzpicture}[overlay/.style={ultra thick, draw=red, fill=white, fill opacity=0.5, text opacity=1},
                    circler/.style={radius=3ex},
                    note/.style={align=center, font=\Large\bfseries}]
  \node[anchor=south west,inner sep=0] (image) at (0,0) {\includegraphics[width=\textwidth]{images/RStudio-screenshot-4pane-default.png}};
  \begin{scope}[x={(image.south east)},y={(image.north west)}]
    \draw[overlay] (0.45,0.7) circle[circler] node[note] {1};
    \draw[overlay] (0.45,0.2) circle[radius=3ex] node[note] {2};
    \draw[overlay] (0.80,0.7) circle[radius=3ex] node[note] {3};
    \draw[overlay] (0.80,0.2) circle[radius=3ex] node[note] {4};
  \end{scope}
\end{tikzpicture}
\caption{Screenshot of RStudio (default layout).}
\end{figure}

:::
::: {.column width="25%"}

left:

  1. top: **Source**^[empty until you create or open a file]

  2. bottom: **Console, Terminal, ...**


right:

  3. top:  
     **Environment, History, ...**
  
  4. bottom: 
     **Files, Plots, Help, ...**


:::
::::::


## Interacting with $\Rlogo$

- Regardless of the GUI, 
  you interact with $\R$ primarily using a _command\ line_
  
  - aka a [c]{.underline}ommand [l]{.underline}ine [i]{.underline}nterface (cli)
  - the command line is usually in the *console*

- “Question-and-Answer Model”

  - | You ask $\R$ to do something (a *command*),  
    |      and $\R$ tells you the answer (*result*).
    
- Instructions are given to $\R$ using the *R language*.

::: notes
R is designed so that users can start by using it *interactively* (what we will do today), and then gradually use it for more programming as their needs and skills grow.

  - Not "point-and-click": no menus or wizards to guide you through steps of an analysis or procedure.
:::

  
## The $\Rlogo$ console

The *console* is a window or pane where you will find:

- The _command line_

  - where you will enter commands for $\R$ to run

- Results of commands and other output

- `Messages`, \WarningTok{Warnings}, and \ErrorTok{Errors} 


## The $\Rlogo$ command-line

- The command *prompt* normally looks like this^[\fade{the colour of the prompt varies depending on the interface}]:

  ``` default
  >
  ```
  
  - This is $\R$'s way of saying "I am ready to accept new commands".
  - Type a new command on the line after this prompt (i.e., *input*).
  
- **Press \important{\texttt{return}}/\important{\texttt{enter}} to *run* the current *command* **

- If you can still edit the command next to the prompt, then it has not been submitted to $\R$ to execute (it is still waiting for input).

- If the last prompt is not empty (i.e., there is text beside it)  
  _and_ you cannot edit what is beside the prompt,  
  it means $\R$ is still running the last command and is not ready to accept a new command yet.
  - Wait for a new empty prompt to appear before entering the next command.


## The $\Rlogo$ command-line (continued)

- If the prompt looks like this:  

  ``` default
  +
  ```

  it means the last command was _incomplete_ and $\R$ is waiting for more input.  
  $\R$ will not do anything until the command is completed or cancelled.
  
  - This usually means you forgot a closing\
    *quote* \important{\texttt{"}}, *parenthesis* \important{\texttt{(}}, 
    *bracket* \important{\texttt{[}}, or *brace* \important{\texttt{\{}}
    
- \highlight{You can \textit{cancel} the current command at any time by pressing \texttt{escape}} (\important{\texttt{esc}})


# Warming up: some early commands

## Input & Output

In this presentation, 

+ *commands* that can be entered in the *command-line* look like this:

  ``` default{#format_input}
  Input (commands)
  ```

  - You can try these yourself!

+ Expected output (results) look like this:

  ```{r format_output, include=TRUE, eval=TRUE, echo=FALSE}
  cat("Output (results)")
  ```


## $\Rlogo$ offers suggestions

Read the opening message carefully.

<!-- ![$\R$ offers suggestions of commands to `Type`{.default} into the console when it starts.](images/R-screenshot-win-default.png){width=90%} -->
\begin{figure}
\centering
\begin{tikzpicture}[overlay/.style={ultra thick, rounded corners, draw=red, fill=none},
                    note/.style={anchor=west, align=left, font=\Large\bfseries},
                    ->/.style={ultra thick, red, -{Latex}[round]}]
  \node[anchor=south west,inner sep=0] (image) at (0,0) {\includegraphics[width=0.9\textwidth]{images/R-screenshot-win-default}};
  \begin{scope}[x={(image.south east)},y={(image.north west)}]
    \node (rect) [overlay, fit={(0,0.36) (0.42,0.46)}, inner sep=0] {};
    \node (note)  [note, text width=12em] at (0.55,0.41) {\textcolor[rgb]{0.60,0.00,0.00}{$\R$ offers suggestions to start with}};
    \draw [->] (note.west) -> (rect.east);
  \end{scope}
\end{tikzpicture}
\caption{$\R$ offers suggestions of commands to \KeywordTok{\texttt{Type}} in the console when it starts.}
\end{figure}


## $\Rlogo$ is a show-off

+--------------------+----------------------------------------------------------+
| ``` r              |                                                          |
| demo(graphics)     | - some plots and graphs that can be made with $\R$       |
| ```                |                                                          |
+--------------------+----------------------------------------------------------+
| ``` r              |                                                          |
| demo(image)        | - image-like graphics and maps                           |
| ```                |   that can be produced with $\R$                         |
+--------------------+----------------------------------------------------------+
| ``` r              |                                                          |
| demo(lm.glm)       | - a demonstration of linear modelling & GLMs             |
| ```                |                                                          |
+--------------------+----------------------------------------------------------+
| ``` r              |                                                          |
| demo()             | - a list of available demos                              |
| ```                |                                                          |
+--------------------+----------------------------------------------------------+
| ``` r              | \ctop{}                                                  |
| help.start()       | | **&larr;** A great place to start,                     |
| ```                | |     especially if you are comfortable reading          |
|                    | |     documentation for a programming language.          |
|                    | |     More on this later.                                |
|                    |                                                          |
+--------------------+----------------------------------------------------------+

### Note

\R{} will not only show the output, but also _the code used to produce it_.

<!--
The descriptions in this section could be entered as comments directly in the code blocks.
But the comment character hasn't been introduced yet,
and I need a clear way to explain the commands in the meantime.
-->


## $\Rlogo$ is a calculator

:::::: {.columns .onlytextwidth}
::: {.column width="45%"}

```{r calculator}
1 + 1
2 * 2
2 ^ 3
```

:::
::: {.column width="45%"}

```{r calculator2}
10 - 1
8 / 2
sqrt(9)
```

:::
::::::

- These are *expressions*
- *Expressions* are *evaluated*, and the *value* (result) is *returned* 
  (sometimes\ *invisibly*)

::: notes

The bullet points are accurate, but I note that the 
[R Language Definition](https://cran.r-project.org/doc/manuals/r-release/R-lang.html)
distinguishes between 'expressions', which are actually a type of object,
and 'statements' (see s2.1.3 'Language objects', s2.1.4 'Expression objects'):

- An *expression* \[object?\] contains one or more statements.
- A statement is a syntactically correct collection of tokens.
- Expression objects are special language objects which contain parsed but unevaluated R statements. 
- "an expression object can contain several such expressions" (not clear)

Therefore, my understanding is that 
a *statement* is parsed (by the R parser),
which results in an unevaluated *expression* (an object of mode "expression"),
which can in turn be evaluated (by 'the evaluator', such as `eval()`)
to return the *value*.

"All expressions have a value." (s3 'Evaluation of expressions')

:::


## $\Rlogo$ command-line tips

- With the cursor next to the empty prompt (\OtherTok{\texttt{>}}),  
  use the up & down \important{arrow keys} (&uarr;&darr;) 
  to re-produce previous commands.
  
- This lets you “scroll through your *command history*”.
  
- Press \important{up} (\important{$\uparrow$}) once, and you get the last command you entered  
  without having to copy & paste.


# Simple $\R$ objects

## Vectors

- The most basic kind of *object* in $\R$ is a *vector*

- Think of a vector as a list of related values (data),  
  which are _all the same type_
  
- A single value is an "*atomic vector*" (a vector with a length of 1)

<!-- empty paragraph for space -->\

:::::: {.columns align=center}
::: {.column width="25%"}
\centering
\important{\Large\textbf{\tikzmarknode{index}{\textit{index}:}\\ the item\\ number}}
:::
::: {.column width="50%"}

\hfill\tikzmarknode[anchor=north west, inner sep=0]{code_tr}{}
```{r vector_demo, echo=4}
opts.width <- getOption('width')
options(width = 30)
2
1:10
options(width = opts.width)
```
\tikzmarknode[anchor=north west, inner sep=0]{code_bl}{}\vspace{-\baselineskip}

:::
::: {.column width="25%"}
\centering
\important{\Large\textbf{\tikzmarknode{value}{\textit{value}}}}
:::
::::::

\begin{tikzpicture}[remember picture, overlay, 
                    arr/.style={ultra thick, red, -{Latex}[round]}]
  \node[anchor=south west,inner sep=0, fit={(code_bl)(code_tr)}] (code) {};
  \begin{scope}[shift=(code.south west),x=(code.south east),y=(code.north west)]
    \draw let \p1 = (index.east) in 
      [arr] (index.east) -- (-0.5cm,\y1) -- (-0.5cm,0.86) -> (-0.01,0.86);
    \draw let \p1 = (index.east) in 
      [arr] (index.east) -- (-0.5cm,\y1) -- (-0.5cm,0.35) -> (0.02,0.35);
    \draw let \p1 = (value.west) in 
      [arr] (value.west) -- (0.25,\y1) -- (0.25,0.86) -> (0.18,0.86);
    \draw let \p1 = (value.west) in 
      [arr] (value.west) -- (0.25,\y1) -- (0.21,0.44);
  \end{scope}
\end{tikzpicture}


## Using vectors

- Vectors can be used in calculations

- Operations are applied to each item
  (*element-wise*)
  
  ```{r vectors_1, results='hide'}
  sum( c(1, 2, 3, 4, 5) )
  1:10 + 2
  1:5 * 5:1
  ```
- Vectors can be used to plot data in a graph

  ```{r vectors_2, results='hide', fig.keep='none'}
  plot( rnorm(1000) )
  hist( rnorm(1000) )
  ```
  
<!-- 1,000 random numbers from a normal distribution -->


## Some data *types* (of *atomic vectors*)

:::::: {.columns align=center}
::: {.column width="45%"}

### ***numeric***

* Includes *integers*, *real* (decimal / *double*), and *complex* numbers.
* `1.23`{.r}

### ***character*** (*string*)

* in single `'`{.r} or double `"`{.r} quotes. 
* `'hello world'`{.r}
* `"1.23"`{.r}

### ***logical***

- `TRUE`{.r} or `FALSE`{.r}

:::
::: {.column width="45%"}
\hfill\tikzmarknode[anchor=south east, inner sep=0]{code_tr}{}
\vspace{-\baselineskip}
```{r data_types, results='hide'}
class(1.23)
class('hello')
class("1.23")
class(FALSE)

typeof(1.23)
typeof(1:10)

as.character(c(1,2,NA,4))
```
\vspace{-\baselineskip}\tikzmarknode[anchor=north west, inner sep=0]{code_bl}{}
\bigskip

\tikzmarknode{as}{}`as.*()`{.r}: converting from one type to another = *coercion*

:::
::::::

\begin{tikzpicture}[remember picture, overlay, 
                    arr/.style={ultra thick, gray, -{Latex}[round]}]
  \node[anchor=south west,inner sep=0, fit={(code_bl)(code_tr)}] (code) {};
  \begin{scope}[shift=(code.south west),x=(code.south east),y=(code.north west)]
    \draw let \p1 = (as.north) in 
      [arr] ($ (as.north) +(1ex,1.5ex) $) -- ($ (\x1,0) +(1ex,0.5ex) $);
  \end{scope}
\end{tikzpicture}


# Storing & retrieving values

## Symbolic _variables_
<!-- variables vs objects?  Objects vs names?  
In R, everything is an _object_, and each has a name -->

- You can store values (*objects*) in symbolic variables (*names*) 
  using an *assignment operator*:
  
-------- ------------------------------------------------------------------
`<-`{.r} assign the *value* on the **right** to the *name* on the **left**
---------------------------------------------------------------------------

:::::: {.columns .onlytextwidth}
::: {.column width="48%"}

- Names can include:

|||<!-- empty header row, because most Markdown parsers require a header row -->
|:----------|---------|
|letters    |\StringTok{\texttt{a-z A-Z}}|
|numbers    |\StringTok{\texttt{0-9}}    |
|periods    |\StringTok{\texttt{.}}      |
|underscores|\StringTok{\texttt{\_}}     |

- Names _should begin with a **\StringTok{letter}**_.

:::
::: {.column width="48%"}
```{r assignment, results='hide'}
A <- 10
B <- 10 * 10
A_log <- log(A)
B.seq <- 1:B

assign('x', 3)
```
:::
::::::


## Retrieve values

When a variable *name* is evaluated, it returns the stored *value*. 

:::::: {.columns .onlytextwidth}
::: {.column width="45%"}

```{r}
A
A_log
```

:::
::: {.column width="45%"}

```{r}
B
x
```

:::
::::::

```{r}
B.seq
```


## Built-in variables

Some words and letters already have values in $\R$  
and should **never be used as variable names**.

:::::: {.columns .onlytextwidth}
::: {.column width="45%"}

```{r}
pi
```

:::
::: {.column width="45%"}

```{r, eval=FALSE}
version
```
```{r, echo=FALSE}
cat("... information about \nthis version of R ...")
```

:::
::::::

```{r}
letters
LETTERS
```


## Reserved words

Some words and letters already have special meaning in the R language (*keywords*) 
and should **never be used as variable names**.

\small
\begin{tikzpicture}[remember picture, overlay]
    \draw[draw=none, fill=lightgray, fill opacity = 0.2] 
      ($ (pic cs:tl) +(0,\baselineskip) $) rectangle ($ (pic cs:br) +(0,-0.2\baselineskip) $);
\end{tikzpicture}

--------------------  ---------------------  --------------------------------------------------------
\tikzmarknode{tl}{}                          <!-- R will trigger an Error if you try to use these: -->
  `NA`{.r}            "Not Available"        placeholder for unknown or missing values

\ `NaN`{.r}           "Not a Number"         placeholder for *undefined* numeric values

\ `NULL`{.r}          _a special object_     placeholder for missing *objects*

\ `Inf`{.r}           Infiniti

\ `TRUE`{.r}          Logical value

\ `FALSE`{.r}         Logical value          \hfill\tikzmarknode{br}{}

<!-- -->                                     <!-- These _can_ be used, but it's not a good idea: -->
\ `T`{.r}             short for `TRUE`{.r}   

\ `F`{.r}             short for `FALSE`{.r}

\ `c,q,t,C,D,I`{.r}   $\R$ functions

\ `diff, df, pt`{.r}  $\R$ functions
-----------------------------------------------------------------------------------------------------

\normalfont


## $\Rlogo$ is case-sensitive

+----------------+----------------+----------------+:--------------:+
| ``` r          | \ctop{}        | ``` r          |                |
| R.version      | a variable     | pi             |                |
| ```            |                | ```            |                |
+----------------+----------------+----------------+----------------+
| ``` r          | \ctop{}        | \ctop{}        | \ctop{}        |
| R.Version()    | a *function*   | \AlertTok{%    |                |
| ```            |                | \textit{PI}}   |                |
+----------------+----------------+----------------+----------------+
| ``` r          | \ctop{}        | ``` r          |                |
| letters        | a-z            | NA             |                |
| ```            |                | ```            |                |
+----------------+----------------+----------------+----------------+
| ``` r          | \ctop{}        | \ctop{}        | \ctop{}        |
| LETTERS        | A-Z            | \AlertTok{%    |                |
| ```            |                | \textit{na}}   |                |
+----------------+----------------+----------------+----------------+


## Use variables in calculations

:::::: {.columns .onlytextwidth}
::: {.column width="45%"}
```{r}
A +5
```
:::
::: {.column width="45%"}
```{r}
B/A
```
:::
::::::

```{r calc_var, fig.keep='none'}
Weight <- c(60 , 72 , 57 , 90 , 95 , 72 )
Height <- c(1.7, 1.8, 1.6, 1.9, 1.7, 1.9)
BMI <- Weight / Height^2
BMI
plot(Height, Weight)
```


## Housekeeping

+--------------------+--------------------------------------------+
| ``` r              | \ctop{}                                    |
| ls()               | List all variables you have created        |
| ```                |                                            |
+--------------------+--------------------------------------------+
| ``` r              | \ctop{}                                    |
| rm(x)              | Remove the variable ‘\name{x}’ from memory |
| ```                |                                            |
+--------------------+--------------------------------------------+
| ``` r              | \ctop{}                                    |
| rm(list=ls())      | Remove _all variables_ from memory\        |
| ```                | (clear memory)                             |
+--------------------+--------------------------------------------+

```{r bad_pie, results='hide'}
pi
pi <- "pie"
pi
rm(pi)
pi
```


# Operators

## Operators

*Operators* are special symbols that go between two values, to perform an
*operation* on both values (the *operands*) and return the *result*.

- For example: `2 * 3`{.r} is a way of saying "*multiply* 2 and 3 together"
- Operations are evaluated one pair at a time, according to precedence (*order of operations*).

:::::: {.columns .onlytextwidth}
::: {.column width="48%"}

### Arithmetic Operators
The usual math symbols: `+, -, *, /, ^`{.r}, etc. 

### Comparison (*Relational*) Operators
For comparing two values: `==, !=, >, <`{.r}, etc.

:::
::: {.column width="48%"}

### Assignment Operators
Assign values to symbolic variables: `<-, ->, =`{.r}, etc.

### Boolean Operators
Combining logical values (`TRUE, FALSE`{.r}): `!, &, |`{.r}, etc.

:::
::::::


## Comparisons

Comparison of 2 values results in
*logical values*: `TRUE`{.r}\ or\ `FALSE`{.r}

----      ----------------------------------------------------
`==`{.r}  "equal"  ---  
          \important{Note the \textbf{two} equals signs.}  \
          Not to be confused with a single equals sign\
          \ (used to *assign* values). 
          
`!=`{.r}  "not equal"

`>`{.r}   "greater than"

`<`{.r}   "less than"

`>=`{.r}  "greater than or equal to"

`<=`{.r}  "less than or equal to"
--------------------------------------------------------------


## Comparisons: examples

:::::: {.columns .onlytextwidth}
::: {.column width="45%"}

```{r comparisons1}
1 == 2
1 <= 2
1 < "a"
```

:::
::: {.column width="45%"}

```{r comparisons2}
1 < 2
1 != "foo"
0 == FALSE
```

:::
::::::


## Comparing decimals ('floating point' arithmetic)

Computers can't represent _all_ values accurately, and there is often some rounding that occurs (even at 50+ decimal places).  
As a result, 'floating point' values may not be _reliably equal_.
^[R FAQ: "[Why doesn’t R think these numbers are equal?](https://cran.r-project.org/doc/FAQ/R-FAQ.html#Why-doesn_0027t-R-think-these-numbers-are-equal_003f)"]
<!-- this footnote really belongs with the solutions, below, but putting it there would put it at the bottom of the _column_, and I want it at the bottom of the *page* -->
^[See Stackoverflow: "[Why are these numbers not equal?](https://stackoverflow.com/questions/9508518/why-are-these-numbers-not-equal)" for other solutions]

:::::: {.columns .onlytextwidth}
::: {.column width="45%"}
\ctop{}
This is a common source of confusion, but it is a fact of how computers handle floating point arithmetic, and not specific to $\R$.
:::
::: {.column width="48%"}
```{r comparing_decimals}
a <- sqrt(2)
a * a == 2  # should be TRUE
a * a - 2
```
:::
::::::

:::::: {.columns .onlytextwidth}
::: {.column width="48%"}
Two common solutions:

1. `round()`{.r} decimal values when comparing them
2. use a function with a tolerance for small differences, such as `all.equal()`{.r}

:::
::: {.column width="48%"}
```{r comparing_round}
round(a * a, 8) == 2
all.equal(a * a, 2)
```
:::
::::::


# Functions

## Functions

- *Functions* are special commands that can do more than simple operators[^operators_are_functions].
- They are the main instructions you give to R.
- To use (or *call*) a function, the command must be structured properly, following the "grammar rules" of the $\R$ language (*syntax*).

<!-- code example to check formatting
``` r
log( 8 , base = 2 )
```
-->

```{=latex}
% https://tex.stackexchange.com/questions/136143/tikz-animated-figure-in-beamer
\begin{figure}
\centering\large\ttfamily
\vspace{2\baselineskip}

\begin{shaded}

\tikzmarknode[anchor=east]{fun}{\FunctionTok{log}}%
\tikzmarknode{popen}{(}
  \tikzmarknode[anchor=west]{arg1}{\DecValTok{8}}
  \tikzmarknode{comma}{,}
  \tikzmarknode{arg2}{\AttributeTok{base =} \DecValTok{2}}
\tikzmarknode{pclose}{)}
\end{shaded}

\caption*{}
\label{fig:function}
\end{figure}

\begin{tikzpicture}[remember picture, overlay,
                    note/.style={font=\Large\itshape},
                    frame1/.style={ultra thick, draw=red, fill=none, fill opacity=0.1, minimum height=2\baselineskip, inner sep=2pt},
                    frame2/.style={ultra thick, draw=blue, fill=lightgray, fill opacity=0.5, minimum height=2\baselineskip, inner sep=1pt},
                    link1/.style={very thick},
                    link2/.style={thick}]
  \node (frame_fun)    [frame1, fit=(fun)] at ($ (fun) +(-2pt,0.1pt) $) {};
  \node (frame_popen)  [frame2, fit=(popen)] at ($ (popen) +(1.4pt,-1.25pt) $) {};
  \node (frame_pclose) [frame2, fit=(pclose)] at ($ (pclose) +(-1.25pt,-1.25pt) $) {};
  \node (frame_arg1)   [frame1, fit=(arg1)] at ($ (arg1) +(0pt,-1.25pt) $) {};
  \node (frame_comma)  [frame2, fit=(comma)] at ($ (comma) +(0,2.65pt) $) {};
  \node (frame_arg2)   [frame1, fit=(arg2)] at ($ (arg2) +(0pt,-1.25pt) $) {};
  \node (frame_args)   [frame1, fit=(frame_arg1)(frame_comma)(frame_arg2), inner sep=0.8pt] {};
  \node (note_fun)     [note, anchor=east, align=right, left=2ex of fun.west] {function name};
  \node (note_parens)  [note, above=2ex of frame_args] {parentheses};
  \node (note_args)    [note, anchor=west, align=left, below right=-1ex and 3ex of frame_args.south east] {arguments};
  \node (note_arg1)    [note, anchor=east, align=right, below left=2ex and 3ex of frame_arg1.south] {argument 1};
  \node (note_arg2)    [note, anchor=west, align=left, below right=2ex and 0pt of frame_arg2.south] {argument 2};
  \node (note_comma)   [note, below=4ex of frame_comma.south] {comma};
  \draw [link1] (note_parens.south) -- (frame_popen.north);
  \draw [link1] (note_parens.south) -- (frame_pclose.north);
  \draw [ultra thick, draw=red] (note_args.west) -- (frame_args.south east);
  \draw [link1] (note_arg1.east) -- (frame_arg1.south);
  \draw [link1] (note_arg2.west) -- (frame_arg2.south);
  \draw [link1] (note_comma.north) -- (frame_comma.south);
\end{tikzpicture}

```


[^operators_are_functions]: technically, operators are special functions with exactly 1 (*unary*) or 2 (*binary*) *arguments*.  See section 3.1.4 "[Operators](https://cran.r-project.org/doc/manuals/r-release/R-lang.html#Operators)" in the [R Language Definition](https://cran.r-project.org/doc/manuals/r-release/R-lang.html).


## Function arguments

<!-- update: clarify default values -->

- *arguments* are the values passed to a function when it is *called*

  - these are values the function needs to do its thing
  - some change _how_ the function operates (these are usually optional)
  <!-- because they have a default value -->

- arguments are separated by a comma (`,`{.r})

- arguments can be *passed by order* or *passed by name*

  - *passed by order* means the arguments are specified in the correct order, without a name

  - *passed by name* means the arguments can be in any order, but must be declared by name: `argument = value`{.r}
    
### !

Note the **single** equals sign (`=`{.r}),
used to assign values to function arguments by name


# Errors, Warnings, and Messages

## Errors

- When R receives a command it does not understand, or cannot execute, it outputs an ***error*** to the *console*.
  - This is a message that begins with the word "\ErrorTok{\texttt{Error}}".
  
- A command that produces an *error* is **not** executed.
  - neither are any commands after the error.

```{r errors1_code, eval=FALSE, echo=TRUE}
Fail <- 1 + "2"
```
```{r errors1_out, eval=TRUE, echo=FALSE}
try( Fail <- 1 + "2" )
```
```{r errors2_code, eval=FALSE, echo=TRUE}
Fail
```
```{r errors2_out, eval=TRUE, echo=FALSE}
try( Fail )
```

- When an error occurs, **$\R$ stops running** commands and returns to the command-line.
  - Your *session* is still active: $\R$ didn't quit, and you can enter more commands.
  
## Warnings

- Some commands still work, but did not run exactly as $\R$ (or the developers) think is "ideal", and may produce a ***warning*** instead.
  - This is a message that begins with the word "\WarningTok{\texttt{Warning}}".
  
- These do not interrupt what R is doing: it will keep running, but tell you that there were warnings. 
  - _It is up to you to review the warnings and decide if they are important_.
  - Use the `warnings()`{.r} command to review them.
  
```{r warnings}
oops <- log(-1)
```


##  Errors, Warnings, and Messages

+ ***Errors*** indicate something is wrong, and $\R$ had to stop.  You'll have to figure out what caused the error, fix it, and try again.

  + \textcolor[rgb]{0.8,0,0}{Think of errors as a red traffic light: stop --- something is wrong!
}

+ ***Warnings*** indicate something unusual happened, but $\R$ is able to continue.  You'll have to assess if it's worth worrying about.

  + \textcolor[rgb]{0.9,0.7,0}{Think of warnings as a yellow traffic light: you can go, but be careful and pay attention, in case there is a problem.
}

+ Other ***Messages*** are for information, and a sign that things are working fine (at least, according to the programmers who created the function).

  + \textcolor[rgb]{0,0.6,0}{Think of messages as a green traffic light: you are safe to continue.}

::: notes
Credit to Chester Ismay & Albert Kim for the traffic light analogy:
https://moderndive.netlify.app/1-getting-started.html
:::




# Help & documentation

# Installing packages

# Saving code (files)

<!-- To ADD:
+ Operators
+ Functions
  + arguments
  + calling functions (syntax)
  + the `c()` function for making vectors
+ Errors & Warnings & Messages
+ Help
+ Installing packages
+ Script files
+ Rmarkdown & R notebooks
-->


# Backmatter

## [Quiz](#pop-quiz) Review

<!-- paste in questions from [Pop Quiz][], above. -->

::: notes
`## Answers (for discussion)`

Answers in notes
:::




## References & More Information

```{r, eval=FALSE}
help.start()
```

Accessible from the screen above (offline):

  - [An Introduction to R](https://cran.r-project.org/doc/manuals/r-release/R-intro.html)
  - [The R Language Definition](https://cran.r-project.org/doc/manuals/r-release/R-lang.html)

Online:

+ [RStudio Education](https://education.rstudio.com/) ([education.rstudio.com](https://education.rstudio.com/))
  - tutorials, workshop materials, and other resources.
+ $\Rlogo$ [Manuals](https://cran.r-project.org/manuals.html)
  (<https://cran.r-project.org/manuals.html>)
+ $\Rlogo$ [Contributed Documentation](https://cran.r-project.org/other-docs.html)
  - e.g., <http://cran.r-project.org/doc/contrib/usingR.pdf>
+ Internet search
  - [Stack Overflow](https://stackoverflow.com/questions/tagged/r) ([stackoverflow.com](https://stackoverflow.com/))
  - [Cookbook for R](http://www.cookbook-r.com/) ([www.cookbook-r.com](http://www.cookbook-r.com/))

<!-- deprecated (these are 10+ years old, but they helped me learn)
Books:

  - [A Beginner's Guide to R](https://link.springer.com/book/10.1007/978-0-387-93837-0)
  - [Introductory Statistics with R](https://link.springer.com/book/10.1007/978-0-387-79054-1)
-->

::: notes

Other training materials and tutorials used as inspiration:

- [A Beginner's Guide to R](https://link.springer.com/book/10.1007/978-0-387-93837-0)
- [Introductory Statistics with R](https://link.springer.com/book/10.1007/978-0-387-79054-1)
- [RStudio Education](https://education.rstudio.com/)
- https://rladiessydney.org/courses/ryouwithme/01-basicbasics-0/
- https://moderndive.netlify.app/1-getting-started.html
- https://cengel.github.io/R-intro/

[^Rlogo]: The R logo ($\Rlogo$) is [© 2016 The R Foundation](https://www.r-project.org/logo/) and used as-is under the terms of the [**CC-BY-SA 4.0** license](https://creativecommons.org/licenses/by-sa/4.0/)

:::


```{r NOTES, include=FALSE, eval=FALSE}
## Notes on formatting output

https://pandoc.org/MANUAL.html#pandocs-markdown
https://pandoc.org/MANUAL.html#slide-shows
https://pandoc.org/MANUAL.html#custom-styles

Tips for controlling highlighting and styles in markdown:
https://stackoverflow.com/questions/53530985/custom-highlighting-style-in-rmarkdown 

Quarto Pandoc Markdown, with native support for flowcharts and diagrams
and other extensions (like callouts and code annotation):
https://quarto.org/docs/authoring/markdown-basics.html

Can I define global 'styles' with options for different output formats, 
and reduce the amount of custom LaTeX?
  
+ https://tug.org/tug2020/preprints/MacFarlane-Keynote-slides.pdf
+ https://stackoverflow.com/questions/23825317/how-to-convert-markdown-css-pdf

## Overlay graphics using Tikz:
https://tex.stackexchange.com/questions/209052/how-to-get-tikzmark-to-work
https://texdoc.org/serve/tikzmark/0
https://tikz.dev/tikz-arrows
https://www.overleaf.com/latex/templates/beamer-arrows/wmqkckggvjsd
https://tex.stackexchange.com/questions/199218/how-to-draw-an-arrow-to-a-specified-position-in-a-frame-and-write-some-notes-on
https://tex.stackexchange.com/questions/347492/how-can-i-draw-arrows-from-items-to-a-picture-in-beamer
https://tex.stackexchange.com/questions/9559/drawing-on-an-image-wit%E2%80%8C%E2%80%8Bh-tikz/
https://tex.stackexchange.com/questions/448838/tikz-node-text-formatting-problems
https://tex.stackexchange.com/questions/590889/crop-pdf-graphics
https://stackoverflow.com/questions/48203496/how-to-trim-a-picture-with-rmarkdown-html
https://tex.stackexchange.com/questions/223650/tikz-node-position-in-draw-environment

## Customizing R code chunks and output
https://yihui.org/knitr/options/
https://texdoc.org/serve/fancyvrb/0
https://tex.stackexchange.com/questions/669717/how-do-i-change-the-default-font-size-of-verbatim-at-document-level
https://tex.stackexchange.com/questions/161678/decreasing-font-size-in-verbatim
https://groups.google.com/g/comp.text.tex/c/YlKONnmYOV8
https://stackoverflow.com/questions/35734525/reduce-space-between-code-chunks-and-code-output-in-rmarkdown-beamer-presentatio

## Other formatting tricks & solutions
https://tex.stackexchange.com/questions/11622/add-space-between-paragraphs-in-beamer
https://www.garrickadenbuie.com/blog/add-a-generated-table-of-contents-anywhere-in-rmarkdown/
```

