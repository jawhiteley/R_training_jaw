---
title: "A Gentle Introduction to R"
author: "Jonathan Whiteley"
date: "`r Sys.Date()`"
output: 
  beamer_presentation: 
    theme: Boadilla
    keep_tex: yes
header-includes: |
  \setbeamertemplate{itemize item}[circle]
  \usepackage{tikz}
  \usetikzlibrary{arrows.meta}
  \newcommand{\Rlogo}{\includegraphics[height=1em]{`r file.path(R.home("doc"), "html", "logo.jpg")`}}
  \newcommand{\R}{\texttt{R}}
  \newcommand{\highlight}[1]{\StringTok{#1}}
  \newcommand{\important}[1]{\AlertTok{#1}}
  \newcommand{\fade}[1]{\textcolor[rgb]{0.66,0.66,0.66}{#1}}
  \newcommand{\annote}[1]{{\footnotesize #1}}
  \newcommand{\obj}[1]{\textit{texttt{\VariableTok{#1}}}}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r NOTES, include=FALSE, eval=FALSE}
https://pandoc.org/MANUAL.html#pandocs-markdown
https://pandoc.org/MANUAL.html#slide-shows
https://pandoc.org/MANUAL.html#custom-styles

Tips for controlling highlighting and styles in markdown:
https://stackoverflow.com/questions/53530985/custom-highlighting-style-in-rmarkdown 

Quarto Pandoc Markdown, with native support for flowcharts and diagrams
and other extensions (like callouts and code annotation):
https://quarto.org/docs/authoring/markdown-basics.html

+ Can I define global 'styles' with options for different output formats, 
  and reduce the amount of custom LaTeX?
```


# Pop Quiz

\annote{\fade{We will review these \textit{at the end}, so you can see how much you have learned.}}

+ What does 'CRAN' stand for?
+ Why is it called '$\R$'?
+ How can you use $\R$ _interactively_?
+ How do you find out what a function does & how to use it?
+ How do you store values to re-use later?
+ True or False: Warnings can be ignored, but an Error means I made a mistake.
+ True or False: Error messages will tell me how to fix the problem.


# Learning Objectives

* Get familiar with the ![]( `r file.path(R.home("doc"), "html", "logo.jpg")`){height=1em} _interface_
* Enter _commands_
  * input & output: using $\R$ interactively
  * use some common _functions_
* Understand _Errors_ & _Warnings_
* Use technical _terms_ for $\R$ concepts
* How to get Help


# Why is it named $\Rlogo$?

- **$\R$** started as an _open-source_ implementation of the  
  **`S`** statistical computing language (S-PLUS)
  - `S` was created at Bell Laboratories in 1976
  - $\R$ was based on the `S` syntax (mostly v3), but works very differently "under the hood".
- **$\R$** was created by [**R**]{.underline}oss Ihaka and [**R**]{.underline}obert Gentleman at the University of Aukland in the early 1990s.


# The $\Rlogo$ inteface

- $\R$ has a slightly different interface for each **O**perating **S**ystem (OS)
  - GUI = **G**raphical **U**ser **I**nterface
- In every case, you interact with R primarily using a _command line_
  - aka “Question-and-Answer Model”
  - You ask $\R$ to do something (a *command*),  
    \qquad{} and $\R$ tells you the answer (*result*).
  - Instructions are given to $\R$ using the *R language*.


# The $\Rlogo$ command-line

- The command *prompt* normally looks like this:  
  \OtherTok{\texttt{>}}  
  <!-- `>`{.r} -->
  (the colour varies, depending on the interface)
  
  - This is $\R$'s way of saying "I am ready to accept new commands".
  - Type a new command on the line after this prompt (i.e., *input*).
  
- **Press \important{\texttt{return}}/\important{\texttt{enter}} to *execute* the current *command* **

- If the prompt looks like this:  
  \OtherTok{\texttt{+}}  
  it means the last command was _incomplete_ and $\R$ is waiting for more input.  
  $\R$ will not do anything until the command is completed or cancelled.
  
  - This usually means you forgot a closing\
    *quote* \important{\texttt{"}}, *parenthesis* \important{\texttt{(}}, 
    *bracket* \important{\texttt{[}}, or *brace* \important{\texttt{\{}}
    
- \highlight{You can \textit{cancel} the current command at any time by pressing \texttt{escape}} (\important{\texttt{esc}})


# The $\Rlogo$ console

In this presentation, 

+ *commands* that can be entered in the *command-line* look like this:

```{r format_input, include=TRUE, eval=FALSE}
Input (commands)
```

+ Expected output (results) look like this:

```{r format_output, include=TRUE, eval=TRUE, echo=FALSE}
cat("Output (results)")
```


# $\Rlogo$ is a show-off

<!-- Trying to display a code block, with explanations of each line side-by-side.
But the code block is always misaligned with the text in the other column in Beamer.
:( -->
:::::: {.columns}
::: {.column width="30%"}
```{r showoff1, eval=FALSE}
demo(graphics)
```
:::
::: {.column width="70%"}
- some plots and graphs that can be made with $\R$
:::
::::::

:::::: {.columns}
::: {.column width="30%"}
```{r showoff2, eval=FALSE}
demo(image)
```
:::
::: {.column width="70%"}
\

- image-like graphics and maps that can be made with $\R$
:::
::::::

:::::: {.columns}
::: {.column width="30%"}
```{r showoff3, eval=FALSE}
demo()
```
:::
::: {.column width="70%"}
a line of plain text.
:::
::::::

:::::: {.columns}
::: {.column width="30%"}
Text with `print("inline code")`{.r}.
:::
::: {.column width="70%"}
- bullet point
:::
::::::

:::::: {.columns}
::: {.column width="30%"}
```{r, eval=FALSE}
demo()
```
:::
::: {.column width="70%"}
<!-- blank line to help with alignment: mixing content and presentation! :( -->\

**&larr;** description.
:::
::::::

:::::: {.columns}
::: {.column width="30%"}
```{r, eval=FALSE}
demo()
```
:::
::: {.column width="70%"}
```
a block of monospace text.
```
:::
::::::


# $\Rlogo$ is a show-off (2)

:::::: {.columns}
::: {.column width="50%"}

```{r showoff, eval=FALSE}
demo(graphics)  # 
demo(image)     # 
demo(lm.glm)    # 
demo()          # 

help.start()    #
```

\tikz[remember picture]{ \node (n1) {};}\
A great place to start, 
especially if you are comfortable reading 
documentation for a programming language.  
More on this later.

:::
::: {.column width="50%"}

- some plots and graphs that can be made with $\R$

- image-like graphics and maps that can be made with $\R$

- a demonstration of linear modelling & GLMs

- a list of available demos

\

## Note

\R{} will not only\ 
show the output, but also\ 
_the code used to produce it_.

:::
::::::


<!-- Overlay arrows:
https://tikz.dev/tikz-arrows
https://www.overleaf.com/latex/templates/beamer-arrows/wmqkckggvjsd
https://tex.stackexchange.com/questions/199218/how-to-draw-an-arrow-to-a-specified-position-in-a-frame-and-write-some-notes-on
https://tex.stackexchange.com/questions/347492/how-can-i-draw-arrows-from-items-to-a-picture-in-beamer
https://tex.stackexchange.com/questions/9559/drawing-on-an-image-wit%E2%80%8C%E2%80%8Bh-tikz/
-->

\begin{tikzpicture}[remember picture, overlay]
  \draw [ultra thick, gray, -{Latex}] (n1.south) -- ++(0,5ex);
\end{tikzpicture}

<!--
The descriptions in this section could be entered as comments directly in the code block.
This would be much simpler in terms of the content (Markdown).
But the comment character hasn't been introduced yet,
and I need a clear way to explain the commands in the meantime.
-->


# $\Rlogo$ is a calculator

:::::: {.columns}
::: {.column width="50%"}

```{r calculator}
1 + 1
2 * 2
2^3
```

:::
::: {.column width="50%"}

```{r calculator2}
10 - 1
8 / 2
sqrt(9)
```

:::
::::::

- These are *expressions*
- *Expressions* are *evaluated*, and the *value* (result) is *returned*\
  (sometimes *invisibly*)

::: notes

The bullet points are accurate, but I note that the 
[R Language Definition](https://cran.r-project.org/doc/manuals/r-release/R-lang.html)
distinguishes between 'expressions', which are actually a type of object,
and 'statements' (see s2.1.3 'Language objects', s2.1.4 'Expression objects'):

- An *expression* \[object?\] contains one or more statements.
- A statement is a syntactically correct collection of tokens.
- Expression objects are special language objects which contain parsed but unevaluated R statements. 
- "an expression object can contain several such expressions" (not clear)

Therefore, my understanding is that 
a *statement* is parsed (by the R parser),
which results in an unevaluated *expression* (an object of mode "expression"),
which can in turn be evaluated (by 'the evaluator', such as `eval()`)
to return the *value*.

"All expressions have a value." (s3 'Evaluation of expressions')

:::


# $\Rlogo$ command-line tips

- With the cursor next to the empty prompt (\OtherTok{\texttt{>}}),  
  use the up & down \important{arrow keys} (&uarr;&darr;) to
  re-produce previous commands
- This lets you 
  “scroll through your *command history*”
- Press \important{up} (\important{$\uparrow$}) once, and you get the last command you entered 
  without having to copy & paste


# Symbolic _variables_
<!-- variables vs objects?  Objects vs names?  
In R, everything is an _object_, and each has a name -->

- You can store values (*objects*) in symbolic variables (*names*) 
  using an *assignment operator*
  
-------- ------------------------------------------------------------------
`<-`{.r} assign the *value* on the **right** to the *name* on the **left**
---------------------------------------------------------------------------

:::::: {.columns}
::: {.column width="50%"}

- Names can include:

|||<!-- empty header row, because most Markdown parsers require a header row -->
|:----------|---------|
|letters    |\StringTok{\texttt{a-z A-Z}}|
|numbers    |\StringTok{\texttt{0-9}}    |
|periods    |\StringTok{\texttt{.}}      |
|underscores|\StringTok{\texttt{\_}}     |

- Names _should begin with a **\StringTok{letter}**_

:::
::: {.column width="50%"}
```{r assignment, results='hide'}
A <- 10
B <- 10 * 10
A_log <- log(A)
B.seq <- 1:B

assign('x', 3)
```
:::
::::::


# References & More Information

```{r, eval=FALSE}
help.start()
```

Available from the above screen:
  
  - [An Introduction to R](https://cran.r-project.org/doc/manuals/r-release/R-intro.html)
  
  - [The R Language Definition](https://cran.r-project.org/doc/manuals/r-release/R-lang.html)

Online:

+ [RStudio Education](https://education.rstudio.com/) ([education.rstudio.com](https://education.rstudio.com/))

  - tutorials, workshop materials, and other resources.

+ [$\Rlogo$](https://r-project.org/) [Manuals](https://cran.r-project.org/manuals.html)
  (<https://cran.r-project.org/manuals.html>)

+ $\Rlogo$ [Contributed Documentation](https://cran.r-project.org/other-docs.html)
  - e.g., <http://cran.r-project.org/doc/contrib/usingR.pdf>

+ Internet search
  - [Stack Overflow](https://stackoverflow.com/questions/tagged/r) ([stackoverflow.com](https://stackoverflow.com/))
  - [Cookbook for R](http://www.cookbook-r.com/) ([www.cookbook-r.com](http://www.cookbook-r.com/))

<!-- deprecated (these are 10+ years old, but they helped me learn)
Books:

  - [A Beginner's Guide to R](https://link.springer.com/book/10.1007/978-0-387-93837-0)
  - [Introductory Statistics with R](https://link.springer.com/book/10.1007/978-0-387-79054-1)
-->
